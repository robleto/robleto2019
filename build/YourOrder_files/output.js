var getQueryStringParam=function(param){param=param.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+param+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.search);if(results==null){return"";}else{return decodeURIComponent(results[1].replace(/\+/g," "));}};var orderPage=(function($){function fancypantsCheckboxishRadioButtons(){$('#offers input[type=radio]:checked').parents('div.offer').addClass('chosen')
$('#offers div.offer').on("keydown",function(e){var enterKey=13;var escapeKey=32;var code=e.which;if((code===enterKey)||(code===escapeKey)){$(this).click();}});$('#offers div.offer').on("click",function(){$('div.offer').removeClass('chosen');$(this).addClass('chosen');var radio=$(this).find('input[type=radio]');radio.prop('checked',true).attr('checked','checked');radio.trigger('change');$('#selected-annual-price').text($('.chosen').find('.annual-price').text());});}
function labelsCanBeDumb(){$('.required').each(function(){$('[for='+$(this).attr('id')+']').addClass('required');});}
function preventDupes(){$('#submit-button').on("click",function(e){var agreeToTermsCheckbox=document.getElementById("agree-to-terms");if(agreeToTermsCheckbox&&!agreeToTermsCheckbox.checked){return;}
$(this).prop('disabled',true);$(this).addClass("disabled");$('.processing-order-message').show();$(this).closest("form").trigger('submit');});}
function toggleStateRegion(chosen){$('#state-region-province div.form-group').hide();resetErrorMessage('id_state');resetErrorMessage('id_province');resetErrorMessage('id_region');if(chosen==='US'){toggleLocationFields({stateShow:true,stateAriaRequired:true,stateAriaHidden:false,provinceShow:false,provinceAriaRequired:false,provinceAriaHidden:true,regionShow:false,regionAriaHidden:true});}else if(chosen==='CA'){toggleLocationFields({stateShow:false,stateAriaRequired:false,stateAriaHidden:true,provinceShow:true,provinceAriaRequired:true,provinceAriaHidden:false,regionShow:false,regionAriaHidden:true});}else{toggleLocationFields({stateShow:false,stateAriaRequired:false,stateAriaHidden:true,provinceShow:false,provinceAriaRequired:false,provinceAriaHidden:true,regionShow:true,regionAriaHidden:false});}}
function resetErrorMessage(formElementId){$('#'+formElementId).parent().removeClass("validEntry").removeClass('invalidEntry').find('.text-danger').html('');}
function toggleLocationFields(settings){var stateField=$('#state-field');var provinceField=$('#province-field');var regionField=$('#region-field');if(settings.stateShow)stateField.show();stateField.find('select').attr('aria-required',settings.stateAriaReqired);stateField.attr('aria-hidden',settings.stateAriaHidden);if(settings.provinceShow)provinceField.show();provinceField.find('select').attr('aria-required',settings.provinceAriaRequired);provinceField.attr('aria-hidden',settings.provinceAriaHidden);if(settings.regionShow)regionField.show();regionField.attr('aria-hidden',settings.regionAriaHidden);}
function togglePhoneInput(chosen){var $postalCode=$('#id_postal_code');if(chosen==='US'){$postalCode.attr({type:"tel"});}else{$postalCode.attr({type:"text"});}}
function bindCountrySelector(){$('#id_country').on("change",function(){toggleStateRegion(this.value);togglePhoneInput(this.value);});}
function removeFocusFromHiddenLogin(){$(document.activeElement).trigger("blur");}
function bringErrorMessagesIntoView(){if($('#form-errors').length){$('html, body').animate({scrollTop:$("#form-errors").offset().top-25},1000);}}
function scrollToElementsForInPageLinks(){$("a[href *= '#'][role != 'tab']").on("click",function(e){if(this.href.indexOf('#')!=-1){e.preventDefault();var tgt='#'+this.href.split('#')[1];if($(tgt).length){$('html, body').animate({scrollTop:$(tgt).offset().top-15},1000);}}});}
function resetCountryIfUkDomainAndAddressNotPrefilled(){var isGBDomain=location.host.indexOf('fool.co.uk')!=-1;var addressWasPrefilled=$('#id_address_1').length>0&&$('#id_address_1').val().trim()!=='';if(isGBDomain&&!addressWasPrefilled){$('#id_country').val('GB');$('#id_country').change();}}
function hidePaymentMethodButtonsIfCreditCardIsOnlyOption(){if($('input[name=payment_method][value^=credit-card]').length==$('input[name=payment_method]').length){$('input[name=payment_method][value^=credit-card]').hide();}}
function hidePaymentMethodLabelTextForSightedUsers(){$(".payment-method label").each(function(index,element){var input=$(element).find("input").get(0);if(input){var inputHtml=input.outerHTML;var labelText=$(element).text();var newLabelHtml='<span class="sr-only">'+labelText+'</span>'+inputHtml;$(element).html(newLabelHtml);}});}
var lastPaymentMethod='';function clickAnywhereInRegionToSetPaymentMethod(){var paymentMethod=$(this).data('payment-method');setPaymentMethodRadioButtonSelected(paymentMethod);}
function setPaymentMethodRadioButtonSelected(paymentMethod){if(paymentMethod==lastPaymentMethod)return;let selector='input[name=payment_method][value='+paymentMethod+']';$(selector).prop('checked',true).attr('checked','checked');setFieldsForCurrentPaymentMethod(paymentMethod);}
function setFieldsForPaymentMethodSelectedOnPageLoad(){let payment_method_selector=$("input[id='payment_method_selector']");let selectedPaymentMethod=payment_method_selector.val();if(selectedPaymentMethod){if($("input[name='payment_method'][value='fool-pass']").length>0&&selectedPaymentMethod!="fool-pass"){exposeAlternativePaymentMethodsIfThere();}}else{let is_last_order_apple_pay=$("input[id='is_last_order_apple_pay']").length>0&&$("input[id='is_last_order_apple_pay']").val().toLowerCase()==="true";if(is_last_order_apple_pay){selectedPaymentMethod='apple-pay';}}
let defaultPaymentMethod=$("input[name='payment_method']:checked").val();if(selectedPaymentMethod&&selectedPaymentMethod!=defaultPaymentMethod){setPaymentMethodRadioButtonSelected(selectedPaymentMethod);}else{setFieldsForCurrentPaymentMethod(defaultPaymentMethod);}}
function setFieldsForCurrentPaymentMethod(paymentMethod){if(paymentMethod=='credit-card'){setAriaRequiredAttributes('credit-card',true);setAriaRequiredAttributes('electronic-check',false);setAriaRequiredAttributes('apple-pay',false);clearRedundantErrors('electronic-check');clearRedundantErrors('apple-pay');}else if(paymentMethod=='electronic-check'){setAriaRequiredAttributes('credit-card',false);setAriaRequiredAttributes('electronic-check',true);setAriaRequiredAttributes('apple-pay',false);clearRedundantErrors('credit-card');clearRedundantErrors('apple-pay');}else if(paymentMethod=='fool-pass'){setAriaRequiredAttributes('credit-card',false);setAriaRequiredAttributes('electronic-check',false);setAriaRequiredAttributes('apple-pay',false);clearRedundantErrors('credit-card');clearRedundantErrors('electronic-check');clearRedundantErrors('apple-pay');}else if(paymentMethod=='apple-pay'){setAriaRequiredAttributes('credit-card',false);setAriaRequiredAttributes('electronic-check',false);setAriaRequiredAttributes('apple-pay',true);clearRedundantErrors('credit-card');clearRedundantErrors('electronic-check');}
if(typeof applePay!=="undefined"){applePay.selectApplePayTab(paymentMethod);}
lastPaymentMethod=paymentMethod;}
function setAriaRequiredAttributes(paymentMethod,newState){var selector=".payment-method[data-payment-method='"+paymentMethod+"'] input[aria-required]";$(selector).each(function(index,element){$(element).attr('aria-required',newState);});}
function clearRedundantErrors(paymentMethod){var selector=".payment-method[data-payment-method='"+paymentMethod+"'] .invalidEntry";$(selector).each(function(index,element){$(element).removeClass('invalidEntry');});selector=".payment-method[data-payment-method='"+paymentMethod+"'] [aria-invalid]";$(selector).each(function(index,element){$(element).val('');$(element).attr('aria-invalid',false);});selector=".payment-method[data-payment-method='"+paymentMethod+"'] .text-danger";$(selector).each(function(index,element){$(element).html('');});}
function bindPaymentMethodRegions(){$('div.payment-method').on("click",clickAnywhereInRegionToSetPaymentMethod);}
function exposeAlternativePaymentMethodsIfThere(){$('input[value=fool-pass]').show();$('#chooseAltPayment').parent().unwrap();$('#chooseAltPayment').hide();$('#alternativePaymentMethods').show().attr('aria-hidden','false');}
function setPageForMultipleMethodOfPayment(){var usingFoolPass=$('#fool-pass').length;if(usingFoolPass){$('input[value=fool-pass]').hide();$('#chooseAltPayment').on("click",exposeAlternativePaymentMethodsIfThere);}else{exposeAlternativePaymentMethodsIfThere();}}
function bindExpandTextLink(){$('.expand-text-link').on("click",function(){expandableText($(this));});}
function expandableText(context){context.closest('.expand-text-link-holder').hide();context.closest('.expandable-text-holder').find('.expandable-text').show();}
function bindStartPriceTable(){$('.start-price-table a').on("click",function(){startPriceTable();});}
function startPriceTable(){$('.start-price-table a').hide();$('.start-price-table .all-credits').hide();$('.start-price-table .individual-credit').show();$('.start-price-table .summed-credits').show();}
function bindFormSubmit(){$('form.form-horizontal').on("submit",function(){cleanCreditCardEntry();});}
function bindSubmitButton(){$('#submit-button').on("click",function(){cleanCreditCardEntry();});}
function cleanCreditCardEntry(){var rawEntry=$('#id_card_number').val();if(rawEntry){var cleanedEntry=rawEntry.replace(/[^0-9]/g,"");$('#id_card_number').val(cleanedEntry);}}
return{exposeAlternativePaymentMethodsIfThere:exposeAlternativePaymentMethodsIfThere,toggleStateRegion:toggleStateRegion,setPaymentMethodRadioButtonSelected:setPaymentMethodRadioButtonSelected,init:function(){fancypantsCheckboxishRadioButtons();labelsCanBeDumb();preventDupes();toggleStateRegion($('#id_country').val());togglePhoneInput($('#id_country').val());bindCountrySelector();removeFocusFromHiddenLogin();bringErrorMessagesIntoView();scrollToElementsForInPageLinks();resetCountryIfUkDomainAndAddressNotPrefilled();hidePaymentMethodButtonsIfCreditCardIsOnlyOption();hidePaymentMethodLabelTextForSightedUsers();bindPaymentMethodRegions();setPageForMultipleMethodOfPayment();setFieldsForPaymentMethodSelectedOnPageLoad();bindExpandTextLink();bindStartPriceTable();bindFormSubmit();bindSubmitButton();}};})(jQuery);$(document).ready(function(){if(typeof applePay!=="undefined"){applePay.initApplePay().then(function(result){applePay.setupApplePayTabs();if(!result){applePay.disableApplePayTab(false);}});}
orderPage.init();});;var orderPageValidation=(function($){var regExStrWesternAlphaChars="^([ \u00c0-\u01ffa-zA-Z&#',\.\-])+$";var regExStrWesternAlphaNumericChars="^([ \u00c0-\u01ffa-zA-Z0-9&#',\.\-])+$";function validationSetup(){disableHTML5Validation();makeEmptyOptionsUnselectable();bindFormSubmission();}
function disableHTML5Validation(){$("#order").attr("novalidate","");}
function makeEmptyOptionsUnselectable(){$("#id_state > option:first-child").attr("disabled","disabled").attr("hidden","true");$("#id_province > option:first-child").attr("disabled","disabled").attr("hidden","true");}
function bindFormSubmission(){$('form#order').submit(function(event){event.preventDefault();validateOrderFormFields(true);goToFirstErrorOrSubmit();});}
function validateOrderFormFields(traditionalPaymentMethod){validateFirstNameEntry();validateLastNameEntry();validateAddress1Entry();validateAddress2Entry();validateCityEntry();validateStateSelection();validateProvinceSelection();validateRegionEntry();validatePostalCodeEntry();validateCountrySelection();validatePhoneNumberEntry();validateEmailEntry();validateConfirmEmailEntry();if(traditionalPaymentMethod){markPaymentMethodFieldsAsRequired(true);validateCardNameFields();validateCardNumbers();validateCardExpirationDates();validateElectronicCheckNameEntry();validateElectronicCheckRoutingNumberEntry();validateElectronicCheckAccountNumberEntry();}else{markPaymentMethodFieldsAsRequired(false);}
if(typeof Surveyor!=="undefined"){bindSurveyorFields();validateSurveyor();}}
function validateFirstNameEntry(){var maxLength=40;var regExpObj=new RegExp(regExStrWesternAlphaChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult("id_first_name",regExpObj);}
function validateLastNameEntry(){var maxLength=40;var regExpObj=new RegExp(regExStrWesternAlphaChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult("id_last_name",regExpObj);}
function validateAddress1Entry(){var maxLength=50;var regExpObj=new RegExp(regExStrWesternAlphaNumericChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult("id_address_1",regExpObj);}
function validateAddress2Entry(){if(!$('#id_address_2').val()){resetEntry("id_address_2");return;}
var maxLength=50;var regExpObj=new RegExp(regExStrWesternAlphaNumericChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult("id_address_2",regExpObj);}
function validateCityEntry(){var maxLength=30;var regExpObj=new RegExp(regExStrWesternAlphaChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult("id_city",regExpObj);}
function validateStateSelection(){if($('#id_country').val()!=='US')return;var value=$('#id_state').val();if(value===null||value===""){markEntryAsRequired('id_state');}else{markEntryAsValid('id_state');}}
function validateProvinceSelection(){if($('#id_country').val()!=='CA')return;var value=$('#id_province').val();if(value===null||value===""){markEntryAsRequired('id_province');}else{markEntryAsValid('id_province');}}
function validateRegionEntry(){if(!$('#id_region').val()){resetEntry("id_region");return;}
var maxLength=50;var regExpObj=new RegExp(regExStrWesternAlphaChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult("id_region",regExpObj);}
function validatePostalCodeEntry(){var country=$('#id_country').val();var regExpObj;if(country=='US'){regExpObj=new RegExp(/^[0-9]{5}(?:\-[0-9]{4})?$/);}else{var maxLength=10;regExpObj=new RegExp(regExStrWesternAlphaNumericChars.replace(/\+/,"{1,"+maxLength+"}"));}
validateEntryAndIndicateResult("id_postal_code",regExpObj);}
function validateCountrySelection(){var value=$('#id_country').val();if(value!==""){markEntryAsValid('id_country');}}
function validatePhoneNumberEntry(){if(!$('#id_phone_number').val()){resetEntry("id_phone_number");return;}
var justTheNumbers=$('#id_phone_number').val().replace(/[^0-9]/g,"");var country=$('#id_country').val();if((country=='CA'||country=='US')&&justTheNumbers.length!=10){markEntryAsInvalid("id_phone_number");return;}
var regExpObj=new RegExp("^\\+?[0-9 ()-]{8,29}$");validateEntryAndIndicateResult("id_phone_number",regExpObj);}
function validateEmailEntry(){var regExpObj=new RegExp(".+@.+");validateEntryAndIndicateResult("id_email",regExpObj);}
function validateConfirmEmailEntry(){var regExpObj=new RegExp(".+@.+");var errorMsgHolder=$('#confirm-email-error');if(($('#id_email').val()===$('#id_confirm_email').val())&&validateEntry("id_confirm_email",regExpObj).validEntry){errorMsgHolder.html('');markEntryAsValid('id_confirm_email');}else{markEntryAsInvalid('id_confirm_email');}}
function validateCardNameFields(){$('#id_card_name, #id_split_card_name').each(function(index,element){validateCardNameEntry(element.id);});}
function validateCardNameEntry(elementId){var maxLength=80;var regExpObj=new RegExp(regExStrWesternAlphaChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult(elementId,regExpObj);}
function validateCardNumbers(){$('#id_card_number, #id_split_card_number').each(function(index,element){validateCardNumberEntry(element.id);});}
function validateCardNumberEntry(elementId){$('#'+elementId).val($('#'+elementId).val().replace(/[^0-9]/g,""));var regExpObj=new RegExp("^4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12}$");validateEntryAndIndicateResult(elementId,regExpObj);}
function validateCardExpirationDates(){if($('#id_card_expiration_month').length==1){validateCardExpirationSelections('id_card_expiration_month','id_card_expiration_year');}
if($('#id_split_card_expiration_month').length==1){validateCardExpirationSelections('id_split_card_expiration_month','id_split_card_expiration_year');}}
function validateCardExpirationSelections(monthElementId,yearElementId){var monthValue=$('#'+monthElementId).val();var yearValue=$('#'+yearElementId).val();if(monthValue&&yearValue){if(monthAndYearInPast(monthValue,yearValue)){markEntryAsInvalid(monthElementId);}else{markEntryAsValid(monthElementId);}}else{markEntryAsRequired(monthElementId);}}
function monthAndYearInPast(month,year){var now=new Date();var currentYearAndMonth=now.getFullYear()+forceMonthToTwoDigits(now.getMonth());var submittedYearAndMonth=year+forceMonthToTwoDigits(month);var expired=currentYearAndMonth>submittedYearAndMonth;return expired;}
function forceMonthToTwoDigits(month){if(Number(month)<10){return'0'+month;}else{return month.toString();}}
function validateElectronicCheckNameEntry(){if(!document.getElementById('id_electronic_check_name'))return;var maxLength=80;var regExpObj=new RegExp(regExStrWesternAlphaChars.replace(/\+/,"{1,"+maxLength+"}"));validateEntryAndIndicateResult("id_electronic_check_name",regExpObj);}
function validateElectronicCheckRoutingNumberEntry(){if(!document.getElementById('id_electronic_check_routing_num'))return;$('#id_electronic_check_routing_num').val($('#id_electronic_check_routing_num').val().replace(/[^0-9]/g,""));var regExpObj=new RegExp("^[0-9]{9}$");validateEntryAndIndicateResult("id_electronic_check_routing_num",regExpObj);}
function validateElectronicCheckAccountNumberEntry(){if(!document.getElementById('id_electronic_check_account_num'))return;$('#id_electronic_check_account_num').val($('#id_electronic_check_account_num').val().replace(/[^0-9]/g,""));var regExpObj=new RegExp("^[0-9]{2,17}$");validateEntryAndIndicateResult("id_electronic_check_account_num",regExpObj);}
function validateSurveyor(){for(var i=0;i<Surveyor.requiredFormElements.length;i++){var formElement=Surveyor.requiredFormElements[i];validateSurveyorFormField(formElement);}}
function validateSurveyorFormField(formElement){var isValid=Surveyor.formElementIsValid(formElement);if(isValid){markEntryAsValid(formElement.id);}else{markEntryAsRequired(formElement.id);}}
function validateEntryAndIndicateResult(elementId,regExpObj){var result=validateEntry(elementId,regExpObj);if(result.validEntry){markEntryAsValid(elementId);}else{var isRequired=$('#'+elementId).hasClass('required');if(!result.value&&isRequired){markEntryAsRequired(elementId);}else{markEntryAsInvalid(elementId);}}}
function validateEntry(elementId,regExpObj){var value=$('#'+elementId).val();value=$.trim(value);var validEntry=regExpObj.test(value);return{validEntry:validEntry,value:value};}
function markEntryAsValid(elementId){$('#'+elementId).attr('aria-invalid','false').closest(".control-field").addClass("validEntry").removeClass('invalidEntry').find('.text-danger').html('');}
function markEntryAsRequired(elementId){var errorMsg=$('#'+elementId).data('msg-required')||$('#'+elementId).closest(".control-field").data('msg-required');$('#'+elementId).attr('aria-invalid','true').closest(".control-field").addClass('invalidEntry').removeClass('validEntry').find('.text-danger').html('<p role="alert"><span class="glyphicon glyphicon-exclamation-sign" style="margin-right: 5px;" aria-hidden="true"></span>'+errorMsg+'</p>');}
function markEntryAsInvalid(elementId){var errorMsg=$('#'+elementId).data('msg-invalid')||$('#'+elementId).closest(".control-field").data('msg-required');$('#'+elementId).attr('aria-invalid','true').closest(".control-field").addClass('invalidEntry').removeClass('validEntry').find('.text-danger').html('<p role="alert"><span class="glyphicon glyphicon-exclamation-sign" style="margin-right: 5px;" aria-hidden="true"></span>'+errorMsg+'</p>');}
function resetEntry(elementId){$('#'+elementId).attr('aria-invalid','false').closest(".control-field").removeClass("validEntry").removeClass('invalidEntry').find('.text-danger').html('');}
function markPaymentMethodFieldsAsRequired(required){$('#id_card_name, #id_split_card_name, #id_card_number, #id_split_card_number, #id_card_expiration_month, #id_card_expiration_year, #id_split_card_expiration_month, #id_split_card_expiration_year, #id_electronic_check_name, #id_electronic_check_routing_num, #id_electronic_check_account_num').each(function(index,element){if(required){markEntryAsRequired(element.id);}else{resetEntry(element.id);}});}
function checkFormInvalidAndDisplayError(){var formInvalid=$('.invalidEntry').length>0;if(formInvalid){var scrollToPixel=Math.floor($('.invalidEntry').first().offset().top)-10;$('html, body').animate({scrollTop:scrollToPixel},1000);bindFormElementsForInstantValidation();$('#submit-button').removeAttr('disabled').removeClass('disabled');$('.processing-order-message').hide();}
return formInvalid;}
function goToFirstErrorOrSubmit(){if(!checkFormInvalidAndDisplayError()){$('form#order')[0].submit();}}
function bindFormElementsForInstantValidation(){bindFirstNameField();bindLastNameField();bindAddress1Field();bindAddress2Field();bindCityField();bindStateField();bindProvinceField();bindRegionField();bindPostalCodeField();bindCountryField();bindPhoneNumberField();bindEmailField();bindConfirmEmailField();bindCardNameField();bindCardNumberField();bindCardExpMonthField();bindCardExpYearField();bindSplitCardNameField();bindSplitCardNumberField();bindSplitCardExpMonthField();bindSplitCardExpYearField();bindElectronicCheckNameField();bindElectronicCheckRoutingNumberField();bindElectronicCheckAccountNumberField();}
function bindFirstNameField(){$('#id_first_name').on("blur",function(){validateFirstNameEntry();});}
function bindLastNameField(){$('#id_last_name').on("blur",function(){validateLastNameEntry();});}
function bindAddress1Field(){$('#id_address_1').on("blur",function(){validateAddress1Entry();});}
function bindAddress2Field(){$('#id_address_2').on("blur",function(){validateAddress2Entry();});}
function bindCityField(){$('#id_city').on("blur",function(){validateCityEntry();});}
function bindStateField(){$('#id_state').on("blur",function(){validateStateSelection();});$('#id_state').on("change",function(){validateStateSelection();});}
function bindProvinceField(){$('#id_province').on("blur",function(){validateProvinceSelection();});$('#id_province').on("change",function(){validateProvinceSelection();});}
function bindRegionField(){$('#id_region').on("blur",function(){validateRegionEntry();});}
function bindPostalCodeField(){$('#id_postal_code').on("blur",function(){validatePostalCodeEntry();});}
function bindCountryField(){$('#id_country').on("blur",function(){validateCountrySelection();});$('#id_country').on("change",function(){validateCountrySelection();});}
function bindPhoneNumberField(){$('#id_phone_number').on("blur",function(){validatePhoneNumberEntry();});}
function bindEmailField(){$('#id_email').on("blur",function(){validateEmailEntry();});}
function bindConfirmEmailField(){$('#id_confirm_email').on("keyup",function(){validateConfirmEmailEntry();});}
function bindCardNameField(){$('#id_card_name').on("blur",function(){validateCardNameEntry('id_card_name');});}
function bindSplitCardNameField(){$('#id_split_card_name').on("blur",function(){validateCardNameEntry('id_split_card_name');});}
function bindCardNumberField(){$('#id_card_number').on("blur",function(){validateCardNumberEntry('id_card_number');});}
function bindSplitCardNumberField(){$('#id_split_card_number').on("blur",function(){validateCardNumberEntry('id_split_card_number');});}
function bindCardExpMonthField(){$('#id_card_expiration_month').on("change",function(){validateCardExpirationSelections('id_card_expiration_month','id_card_expiration_year');});}
function bindSplitCardExpMonthField(){$('#id_split_card_expiration_month').on("change",function(){validateCardExpirationSelections('id_split_card_expiration_month','id_split_card_expiration_year');});}
function bindCardExpYearField(){$('#id_card_expiration_year').on("change",function(){validateCardExpirationSelections('id_card_expiration_month','id_card_expiration_year');});}
function bindSplitCardExpYearField(){$('#id_split_card_expiration_year').on("change",function(){validateCardExpirationSelections('id_split_card_expiration_month','id_split_card_expiration_year');});}
function bindElectronicCheckNameField(){$('#id_electronic_check_name').on("blur",function(){validateElectronicCheckNameEntry('id_electronic_check_name');});}
function bindElectronicCheckRoutingNumberField(){$('#id_electronic_check_routing_num').on("blur",function(){validateElectronicCheckRoutingNumberEntry();});}
function bindElectronicCheckAccountNumberField(){$('#id_electronic_check_account_num').on("blur",function(){validateElectronicCheckAccountNumberEntry();});}
function bindSurveyorFields(){$("#surveyor").on("change",function(event){validateSurveyFieldIfRequired(event);});$("#surveyor").on("click",function(event){validateSurveyFieldIfRequired(event);});}
function validateSurveyFieldIfRequired(event){var source=event.target;if(Surveyor.requiredFormElements.indexOf(source)>-1){validateSurveyorFormField(source);}}
return{clientSideValidationIsOn:false,clientSideValidation:function(){validationSetup();this.clientSideValidationIsOn=true;},applePayValidationIsOn:false,checkApplePayFormValid:function(){this.applePayValidationIsOn=true;validateOrderFormFields(false);return!checkFormInvalidAndDisplayError();},markPaymentMethodFieldsAsRequired:function(required){return markPaymentMethodFieldsAsRequired(required);},};})(jQuery);;/*!
 * @preserve
 * jquery.scrolldepth.js | v0.8
 * Copyright (c) 2015 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */;(function($,window,document,undefined){"use strict";var defaults={minHeight:0,elements:[],percentage:true,userTiming:true,pixelDepth:true,nonInteraction:true,gaGlobal:false,gtmOverride:false};var $window=$(window),cache=[],lastPixelDepth=0,universalGA,classicGA,gaGlobal,standardEventHandler;$.scrollDepth=function(options){var startTime=+new Date;options=$.extend({},defaults,options);if($(document).height()<options.minHeight){return;}
if(options.gaGlobal){universalGA=true;gaGlobal=options.gaGlobal;}else if(typeof ga==="function"){universalGA=true;gaGlobal='ga';}else if(typeof __gaTracker==="function"){universalGA=true;gaGlobal='__gaTracker';}
if(typeof _gaq!=="undefined"&&typeof _gaq.push==="function"){classicGA=true;}
if(typeof options.eventHandler==="function"){standardEventHandler=options.eventHandler;}else if(typeof dataLayer!=="undefined"&&typeof dataLayer.push==="function"&&!options.gtmOverride){standardEventHandler=function(data){dataLayer.push(data);};}
if(options.percentage){sendBaseline('Percentage');}else if(options.elements){sendBaseline('Elements');}
function sendBaseline(action,label){if(standardEventHandler){standardEventHandler({'event':'ScrollDistance','eventCategory':'Scroll Depth','eventAction':action,'eventLabel':'Baseline','eventValue':1,'eventNonInteraction':true});}else{if(universalGA){window[gaGlobal]('send','event','Scroll Depth',action,'Baseline',1,{'nonInteraction':true});}
if(classicGA){_gaq.push(['_trackEvent','Scroll Depth',action,'Baseline',1,true]);}}}
function sendEvent(action,label,scrollDistance,timing){if(standardEventHandler){standardEventHandler({'event':'ScrollDistance','eventCategory':'Scroll Depth','eventAction':action,'eventLabel':label,'eventValue':1,'eventNonInteraction':options.nonInteraction});if(options.pixelDepth&&arguments.length>2&&scrollDistance>lastPixelDepth){lastPixelDepth=scrollDistance;standardEventHandler({'event':'ScrollDistance','eventCategory':'Scroll Depth','eventAction':'Pixel Depth','eventLabel':rounded(scrollDistance),'eventValue':1,'eventNonInteraction':options.nonInteraction});}
if(options.userTiming&&arguments.length>3){standardEventHandler({'event':'ScrollTiming','eventCategory':'Scroll Depth','eventAction':action,'eventLabel':label,'eventTiming':timing});}}else{if(universalGA){window[gaGlobal]('send','event','Scroll Depth',action,label,1,{'nonInteraction':options.nonInteraction});if(options.pixelDepth&&arguments.length>2&&scrollDistance>lastPixelDepth){lastPixelDepth=scrollDistance;window[gaGlobal]('send','event','Scroll Depth','Pixel Depth',rounded(scrollDistance),1,{'nonInteraction':options.nonInteraction});}
if(options.userTiming&&arguments.length>3){window[gaGlobal]('send','timing','Scroll Depth',action,timing,label);}}
if(classicGA){_gaq.push(['_trackEvent','Scroll Depth',action,label,1,options.nonInteraction]);if(options.pixelDepth&&arguments.length>2&&scrollDistance>lastPixelDepth){lastPixelDepth=scrollDistance;_gaq.push(['_trackEvent','Scroll Depth','Pixel Depth',rounded(scrollDistance),1,options.nonInteraction]);}
if(options.userTiming&&arguments.length>3){_gaq.push(['_trackTiming','Scroll Depth',action,timing,label,100]);}}}}
function calculateMarks(docHeight){return{'25%':parseInt(docHeight*0.25,10),'50%':parseInt(docHeight*0.50,10),'75%':parseInt(docHeight*0.75,10),'100%':docHeight-5};}
function checkMarks(marks,scrollDistance,timing){$.each(marks,function(key,val){if($.inArray(key,cache)===-1&&scrollDistance>=val){sendEvent('Percentage',key,scrollDistance,timing);cache.push(key);}});}
function checkElements(elements,scrollDistance,timing){$.each(elements,function(index,elem){if($.inArray(elem,cache)===-1&&$(elem).length){if(scrollDistance>=$(elem).offset().top){sendEvent('Elements',elem,scrollDistance,timing);cache.push(elem);}}});}
function rounded(scrollDistance){return(Math.floor(scrollDistance/250)*250).toString();}
function throttle(func,wait){var context,args,result;var timeout=null;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args);};return function(){var now=new Date;if(!previous)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);}else if(!timeout){timeout=setTimeout(later,remaining);}
return result;};}
$window.on('scroll.scrollDepth',throttle(function(){var docHeight=$(document).height(),winHeight=window.innerHeight?window.innerHeight:$window.height(),scrollDistance=$window.scrollTop()+winHeight,marks=calculateMarks(docHeight),timing=+new Date-startTime;if(cache.length>=4+options.elements.length){$window.off('scroll.scrollDepth');return;}
if(options.elements){checkElements(options.elements,scrollDistance,timing);}
if(options.percentage){checkMarks(marks,scrollDistance,timing);}},500));};})(jQuery,window,document);;$(document).ready(function(){try{var contentSlug=getQueryStringParam('c');var scrollDepthElements=[];if(typeof Infotrack==="undefined"){if(typeof window.top.Infotrack!=="undefined"){var Infotrack=window.top.Infotrack;}else{var Infotrack={track:function(){}};}}
scrollDepthElements.push('#offers','#submit-button');$.scrollDepth({elements:scrollDepthElements,percentage:true,pixelDepth:false,userTiming:false,eventHandler:function(data){Infotrack.track('Scrolled ('+data['eventAction']+')',{category:'Pages',label:data['eventLabel'],order_page_content_slug:contentSlug});}});$('[data-event-track]').on("click",function(){Infotrack.track('Clicked',{category:'Elements',label:$(this).data('event-track'),order_page_content_slug:contentSlug});});if(typeof(riveted)!=="undefined"){riveted.init({reportInterval:60,nonInteraction:true});}
window._wq=window._wq||[];_wq.push({'_all':function(video){video.bind('play',function(){Infotrack.track('Played',{category:'Videos',label:video.name(),order_page_content_slug:contentSlug});});video.bind('pause',function(){Infotrack.track('Paused',{category:'Videos',label:video.name(),order_page_content_slug:contentSlug,value:video.time()});});video.bind('end',function(){Infotrack.track('Ended',{category:'Videos',label:video.name(),order_page_content_slug:contentSlug});});}});$('div.modal').on('shown.bs.modal',function(e){Infotrack.track('Shown',{category:'Modals',label:e.target.id,order_page_content_slug:contentSlug});});$('div.modal').on('hidden.bs.modal',function(e){Infotrack.track('Hidden ',{category:'Modals',label:e.target.id,order_page_content_slug:contentSlug});});$('div.offer').on("click",function(){Infotrack.track('Clicked',{category:'Elements',label:$(this).data('term')+' year offer',order_page_content_slug:contentSlug});});}catch(e){if(typeof(Raven)!=="undefined"&&typeof(Raven.captureException)!=="undefined"){Raven.captureException(e)}}});;